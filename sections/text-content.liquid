<section class="text-content-section {% if section.settings.background_color == 'white' %}bg-white{% elsif section.settings.background_color == 'cream' %}bg-cream{% else %}bg-primary{% endif %}">
  <div class="container">
    <div class="text-content-grid {% if section.settings.video_file_url != blank or section.settings.video_external_url != blank %}has-video{% endif %}">
      {%- if section.settings.video_file_url != blank or section.settings.video_external_url != blank -%}
        <div class="text-content-video">
          <div class="video-decoration"></div>
          {%- if section.settings.video_file_url != blank -%}
            <video
              autoplay
              loop
              muted
              playsinline
              class="content-video"
            >
              <source src="{{ section.settings.video_file_url }}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          {%- elsif section.settings.video_external_url != blank -%}
            {{
              section.settings.video_external_url
              | video_tag: autoplay: true, loop: true, muted: true, class: 'content-video'
            }}
          {%- endif -%}
        </div>
      {%- endif -%}

      <div class="text-content-wrapper {% if section.settings.text_alignment == 'center' and section.settings.video_file_url == blank and section.settings.video_external_url == blank %}text-center{% endif %}">
        {% if section.settings.overline != blank %}
          <span class="text-overline">{{ section.settings.overline }}</span>
        {% endif %}

        {% if section.settings.heading != blank %}
          <h2 class="text-heading serif">{{ section.settings.heading }}</h2>
        {% endif %}

        {% if section.settings.description != blank %}
          <div class="text-description">
            {{ section.settings.description }}
          </div>
        {% endif %}

        {% if section.settings.button_text != blank %}
          <a href="{{ section.settings.button_link }}" class="text-button">
            {{ section.settings.button_text }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<style>
  .text-content-section {
    padding: 10rem 0;
    position: relative;
  }

  .bg-white {
    background-color: white;
  }

  .bg-cream {
    background-color: var(--color-background);
  }

  .bg-primary {
    background-color: var(--color-primary);
    color: white;
  }

  .text-content-wrapper {
    max-width: 64rem;
    margin: 0 auto;
  }

  .text-content-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 6rem;
    align-items: center;
  }

  .text-content-grid.has-video {
    max-width: 120rem;
    margin: 0 auto;
  }

  @media (min-width: 1024px) {
    .text-content-grid.has-video {
      grid-template-columns: 1.2fr 1fr;
    }
  }

  .text-content-video {
    position: relative;
  }

  .video-decoration {
    position: absolute;
    inset: 0;
    background-color: rgba(164, 124, 72, 0.05);
    border-radius: 4rem;
    transform: rotate(-3deg);
  }

  .content-video {
    position: relative;
    width: 100%;
    border-radius: 4rem;
    box-shadow: 0 50px 100px -20px rgba(26, 46, 38, 0.2);
    border: 8px solid white;
    aspect-ratio: 16 / 9;
    object-fit: cover;
  }

  .text-center {
    text-align: center;
  }

  .text-overline {
    font-size: 3rem;
    font-weight: 700;
    font-family: var(--font-heading);
    opacity: 0.1;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    display: block;
    margin-bottom: 2rem;
  }

  .bg-primary .text-overline {
    color: var(--color-secondary);
  }

  .text-heading {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    margin-bottom: 2.5rem;
  }

  .text-description {
    font-size: 1.5rem;
    line-height: 1.6;
    font-weight: 300;
    margin-bottom: 4rem;
  }

  .bg-primary .text-description {
    color: rgba(255, 255, 255, 0.8);
  }

  .bg-white .text-description,
  .bg-cream .text-description {
    color: rgba(26, 46, 38, 0.8);
  }

  .text-button {
    display: inline-block;
    border-bottom: 2px solid;
    padding-bottom: 0.5rem;
    font-weight: 700;
    font-size: 1.125rem;
    text-decoration: none;
    transition: all 0.3s;
  }

  .bg-primary .text-button {
    color: white;
    border-color: white;
  }

  .bg-primary .text-button:hover {
    color: var(--color-secondary);
    border-color: var(--color-secondary);
  }

  .bg-white .text-button,
  .bg-cream .text-button {
    color: var(--color-primary);
    border-color: var(--color-primary);
  }

  .bg-white .text-button:hover,
  .bg-cream .text-button:hover {
    color: var(--color-secondary);
    border-color: var(--color-secondary);
  }
</style>

{% schema %}
{
  "name": "Text Content",
  "settings": [
    {
      "type": "select",
      "id": "background_color",
      "label": "Background Color",
      "options": [
        {
          "value": "white",
          "label": "White"
        },
        {
          "value": "cream",
          "label": "Cream"
        },
        {
          "value": "primary",
          "label": "Dark Green"
        }
      ],
      "default": "white"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Video Settings"
    },
    {
      "type": "text",
      "id": "video_file_url",
      "label": "Video File URL",
      "info": "Upload an .mp4 to Files and paste the URL here."
    },
    {
      "type": "video_url",
      "id": "video_external_url",
      "label": "External Video URL",
      "accept": ["youtube", "vimeo"],
      "info": "Optionally use a YouTube or Vimeo link."
    },
    {
      "type": "text",
      "id": "overline",
      "label": "Overline Text",
      "default": "Our History"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Built to Last."
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>In 1939, King Pine was founded on a simple premise: a cleaner should be as powerful as the natural elements it contains. Decades of change haven't altered our original formula's efficacy. Today, we remain the first choice for those who demand absolute cleanliness.</p>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Discover Our Heritage"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "presets": [
    {
      "name": "Text Content"
    }
  ]
}
{% endschema %}
